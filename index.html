<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>StyleScore AI 2.0</title>
  <style>
    body {
      background: #f9f9fc;
      color: #222;
      font-family: 'Segoe UI', 'Noto Sans TC', Arial, sans-serif;
      margin: 0;
      padding: 0;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    header {
      background: #4f46e5;
      color: #fff;
      width: 100%;
      padding: 1.5rem 0;
      text-align: center;
      letter-spacing: 2px;
      font-size: 2rem;
      font-weight: 700;
      margin-bottom: 2rem;
    }
    .a1 {
      background: #fff;
      border-radius: 1.5rem;
      box-shadow: 0 2px 8px rgba(80,90,160,0.08);
      padding: 2rem 1.5rem 2.5rem 1.5rem;
      max-width: 400px;
      width: 100%;
      margin-bottom: 2rem;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    label {
      font-size: 1.1rem;
      margin-bottom: 1rem;
      display: block;
      text-align: center;
    }
    input[type="file"] {
      margin-bottom: 1.3rem;
      font-size: 1rem;
      width: 100%;
    }
    button {
      background: #4f46e5;
      color: #fff;
      border: none;
      font-size: 1.1rem;
      padding: 0.8rem 2rem;
      border-radius: 999px;
      cursor: pointer;
      margin-bottom: 1.2rem;
      transition: background 0.2s;
    }
    button:active {
      background: #3730a3;
    }
    .b2 {
      margin: 1rem 0;
      max-width: 180px;
      max-height: 220px;
      border-radius: 0.7rem;
      box-shadow: 0 1px 6px rgba(0,0,0,0.15);
      display: none;
    }
    .c3 {
      width: 100%;
      background: #f3f4fa;
      border-radius: 1rem;
      padding: 1.2rem;
      font-size: 1rem;
      color: #222;
      min-height: 2.5rem;
      margin-top: 1rem;
      white-space: pre-line;
      box-sizing: border-box;
    }
    .d4 {
      color: #4f46e5;
      font-size: 1.1rem;
      margin-top: 1.2rem;
      font-style: italic;
    }
    @media (max-width: 500px) {
      .a1 {padding: 1rem 0.5rem;}
      .c3 {padding: 0.9rem;}
      header {font-size: 1.3rem;}
    }
  </style>
</head>
<body>
  <header>StyleScore AI 2.0</header>
  <div class="a1">
    <label for="e5">上傳含人物的穿搭圖片，AI 幫你評分與評論：</label>
    <input type="file" id="e5" accept="image/*">
    <img class="b2" id="f6" alt="圖片預覽">
    <button id="g7" disabled>AI 評價衣著</button>
    <div class="d4" id="h8" style="display:none;">AI 分析中，請稍候...</div>
    <div class="c3" id="i9"></div>
  </div>
  <script>
    const j0=document.getElementById('e5');
    const k1=document.getElementById('f6');
    const l2=document.getElementById('g7');
    const m3=document.getElementById('i9');
    const n4=document.getElementById('h8');
    let o5="";
    j0.addEventListener('change',function(p6){
      const q7=p6.target.files[0];
      if(!q7){
        k1.style.display="none";
        l2.disabled=true;
        o5="";
        return;
      }
      const r8=new FileReader();
      r8.onload=function(s9){
        o5=s9.target.result.split(',')[1];
        k1.src=s9.target.result;
        k1.style.display="block";
        l2.disabled=false;
      }
      r8.readAsDataURL(q7);
    });
    l2.addEventListener('click',async function(){
      if(!o5)return;
      m3.textContent="";
      n4.style.display="block";
      l2.disabled=true;
      const t0="QUl6YVN5Qjh4Z2liMU1CcEMwQzdkUW1kNk9KSDFjTGNMWUtZVWZN";
      const u1=atob(t0);
      const v2=`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${u1}`;
      const w3="請針對下圖人物的穿搭風格，用30字以內、簡潔、幽默又有創意的語氣，進行時尚評價，提出亮點和建議，並給出0-100分的分數。";
      const x4={
        contents:[
          {
            parts:[
              {text:w3},
              {
                inline_data:{
                  mime_type:"image/jpeg",
                  data:o5
                }
              }
            ]
          }
        ]
      };
      try{
        const y5=await fetch(v2,{
          method:"POST",
          headers:{"Content-Type":"application/json"},
          body:JSON.stringify(x4)
        });
        if(!y5.ok){
          throw new Error("API 回應失敗，請稍後再試");
        }
        const z6=await y5.json();
        let a7="";
        if(
          z6&&
          z6.candidates&&
          z6.candidates[0]&&
          z6.candidates[0].content&&
          z6.candidates[0].content.parts&&
          z6.candidates[0].content.parts[0]&&
          z6.candidates[0].content.parts[0].text
        ){
          a7=z6.candidates[0].content.parts[0].text;
        }else{
          a7="無法取得 AI 評價，請換一張人物圖片再試。";
        }
        m3.textContent=a7.trim();
      }catch(b8){
        m3.textContent="出現錯誤："+b8.message;
      }finally{
        n4.style.display="none";
        l2.disabled=false;
      }
    });
  </script>
</body>
</html>
